bug: whole array assignment of promotion is not parallel
